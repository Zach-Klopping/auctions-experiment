{{ block content }}

<div class="container" style="height:130vh;">
<div class="title">
  <p>Auction</p>
</div>

<!-- Link to js_warning file that requires users to enable JavaScript -->
{{ include '_static/popups/js_warning.html' }}

<!-- Link to your general.js file that contains the logic for generating the payoff table -->
<script src="{% static 'general.js' %}"></script>

<!-- Link to the external CSS file -->
<link rel="stylesheet" type="text/css" href="{% static 'general.css' %}">

<p>The payoff table below shows your payoffs from the auction, {% if integrated_endowment %} including your initial endowment of 400 cents,{% endif %} given your randomly drawn value of {{ auction_value }}.</p>
<p style="margin-bottom: 4px;">There are four buttons below the payoff table:</p>
<ul>
  <li>Instructions <span style="color:orange">(Orange)</span>
    <ul>
      <li style="margin-bottom: -10px;">Accesses the full instructions for the experiment.</li>
    </ul>
  </li>
  <li>Value for Payoff Table <span style="color:rgb(187, 124, 255)">(Purple)</span>
    <ul>
      <li style="margin-bottom: 4px;">Accesses a pulldown menu that allows you to see the payoff table for other values.</li>
      <li style="margin-bottom: -10px;">Your value is highlighted in <span style="color:red">red</span> so you can easily find it.</li>
    </ul>
  </li>
  <li>Select Your Bid <span style="color:rgb(110, 207, 255)">(Blue)</span>
    <ul>
      <li style="margin-bottom: -10px;">Accesses a pulldown menu that you will use to select a bid.</li>
    </ul>
  </li>
  <li>Confirm Your Bid <span style="color:rgb(76, 234, 76)">(Green)</span>
    <ul>
      <li style="margin-bottom: 4px;">Use this button to confirm your bid and continue to the final screen.</li>
      <li style="margin-bottom: -10px;">This button will only turn green after you select a bid.</li>
    </ul>
  </li>
</ul>

<p>The auction is won by the person who submits the highest bid. The winning bidder earns the difference between their value for the widget and the losing bid (i.e. the bid submitted by the other person). The losing bidder earns zero. In case of a tie, you will earn the average of what you would get as the winner and as the loser.</p>

<p class="center-text-auctions" style="color: red; font-size: 20px; margin-top: 10px; margin-bottom: 30px;"><b>Your randomly drawn value for the widget is {{ auction_value }}</b></p>

<div class= "game" id="payoff-table-container"></div>

<div class="button-row">
  <button type="button" class="instructions_bttn" style="background-color:orange;" onclick="showInstructions()">Instructions</button>
  <!-- Dropdown to select the value -->
  <div class="dropdown">
    <button type="button" style="background-color: rgb(187, 124, 255);" class="dropdown-btn" onclick="toggleDropdown()">Value for Payoff Table: {{ auction_value }}</button>
    <div id="dropdown-content" class="dropdown-content" style="display: none; width: 100%;">
      <div class="dropdown-option" onclick="selectValue(0)" {% if auction_value == 0 %}style="color: red;"{% endif %}>0</div>
      <div class="dropdown-option" onclick="selectValue(50)" {% if auction_value == 50 %}style="color: red;"{% endif %}>50</div>
      <div class="dropdown-option" onclick="selectValue(100)" {% if auction_value == 100 %}style="color: red;"{% endif %}>100</div>
      <div class="dropdown-option" onclick="selectValue(150)" {% if auction_value == 150 %}style="color: red;"{% endif %}>150</div>
      <div class="dropdown-option" onclick="selectValue(200)" {% if auction_value == 200 %}style="color: red;"{% endif %}>200</div>
      <div class="dropdown-option" onclick="selectValue(250)" {% if auction_value == 250 %}style="color: red;"{% endif %}>250</div>
      <div class="dropdown-option" onclick="selectValue(300)" {% if auction_value == 300 %}style="color: red;"{% endif %}>300</div>
      <div class="dropdown-option" onclick="selectValue(350)" {% if auction_value == 350 %}style="color: red;"{% endif %}>350</div>
      <div class="dropdown-option" onclick="selectValue(400)" {% if auction_value == 400 %}style="color: red;"{% endif %}>400</div>
      <div class="dropdown-option" onclick="selectValue(450)" {% if auction_value == 450 %}style="color: red;"{% endif %}>450</div>
      <div class="dropdown-option" onclick="selectValue(500)" {% if auction_value == 500 %}style="color: red;"{% endif %}>500</div>
    </div>
  </div>

  <!-- Dropdown to select the bid -->
  <div id="bid-dropdown" class="bid-dropdown">
    <button type="button" class="bid-dropdown-btn" style="background-color: rgb(110, 207, 255);" onclick="toggleBidDropdown()">Select Your Bid</button>
    <span id="bid-error-message"></span>
    <div id="bid-dropdown-content" class="bid-dropdown-content" style="display: none;">
      <div class="bid-dropdown-option" onclick="selectBid(0)">0</div>
      <div class="bid-dropdown-option" onclick="selectBid(50)">50</div>
      <div class="bid-dropdown-option" onclick="selectBid(100)">100</div>
      <div class="bid-dropdown-option" onclick="selectBid(150)">150</div>
      <div class="bid-dropdown-option" onclick="selectBid(200)">200</div>
      <div class="bid-dropdown-option" onclick="selectBid(250)">250</div>
      <div class="bid-dropdown-option" onclick="selectBid(300)">300</div>
      <div class="bid-dropdown-option" onclick="selectBid(350)">350</div>
      <div class="bid-dropdown-option" onclick="selectBid(400)">400</div>
      <div class="bid-dropdown-option" onclick="selectBid(450)">450</div>
      <div class="bid-dropdown-option" onclick="selectBid(500)">500</div>
    </div>
  </div>
  <button type="submit" onclick="return validateBidSelection()" id="confirm-button">Confirm Your Bid: <span id="selected-bid-display">None</span></button>
  <input type="hidden" name="selected_bid" id="selected-bid-input">
</div>

{{ include '_static/popups/instructions_bttn.html' }}

{{ endblock }}